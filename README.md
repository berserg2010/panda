## Panda

### ТЗ

Разработать web-приложение по обучению иностранным языкам (английский, кирайский).
Приложение делится на два раздела - public и private.

Public - общедоступные ресурсы.

Private - закрытые ресурсы, также делится на

- "Личный кабинет (ЛК) ученика"
- "Личный кабинет (ЛК) учителья"
- "Административный сайт"


Разделы ЛК ученика:

"Ученик регистрируется и с ним проходить пробное бесплатное занятие с нашим учителем методистом. Учитель смотрит уровень и определяет кто из наших учителей будет заниматься с учеником. 
Потом идёт оплата и начало учебы. Ученик занимается 1 на 1 с преподавателем. В конце каждого урока получает домашнее задание"

"Учитель методист проводит первое занятие бесплатно, определяет уровень ученика и подбирает преподавателя.

Ученик оплачивает n занятий, которые он должен выходить за 28 дней (4 недели) и выбирает расписание с преподавателем. 

Ученик может отменить занятие за 8 часов без потери средств. Менее за 8 часов - средства сгорают. Отменённое заранее занятие ученик может провести в другой день и в другое время, обсудив данный вопрос со своим преподавателем. То есть может выйти так, что расписание изменится. 

Если на 27 день после оплаты у ученика на счету будет 3 занятия, он может выбрать две вещи: оплатить ещё 8 занятий, тогда у него будет 28 дней на то чтобы выходить 11 занятий, либо эти 3 сгорают. 

Ещё у ученика должна быть возможность заморозки занятий на неделю, в случае болезни/отпуска"

"Расписание согласовывают на первом пробном занятии"

- Личный кабинет
- Расписание
    
    "Да, некоторые ученики изучают 2 языка. Возможны два урока подряд"
    
- Курсы
    
    "Один учитель ведет весь курс"
    
    "Мы не продаем курсы, мы продаем занятия с учителем. Вы можете прийти и купить абонемент на 8 занятий. На первом занятии будет определен ваш уровень и ваша цель и исходя из этого мы подбираем учителя, который будет работать с учеником, пока его цель или уровень не изменится."

- Мои заметки
- Мой словарь

    "словарь нужен отдельно, так как туда постоянно будут возвращаться ученики и слова часто они будут просматривать за предыдущие уроки тоже"

- Видеопрактика (убрать)
- Тесты (убрать)
- Словарные игры
- Занятия
- Бесплатные уроки
- Домашние задания

    "задание должно быть сделано до следующего урока, то в случае не выполнения у ребёнка это отражается на рейтинге, то есть он получает ноль а потом это задание  уходит в хвосты на 2 недели. Если делает, то исправляет рейтинг."

- План занятий

Разделы ЛК учителя:

"учитель должен иметь возможность подготовить материалы для урока и отменить что занятие прошло"

- Личный кабинет
- Расписание
- Материалы

    "Здесь ссылки на полезные материалы для учителей. Типа книги, видео, аудио материалы. Учитель может выбрать курс английский для новичков скажем, урок 10 и посмотреть какие есть доп материалы, которые можно использовать на уроке"

    "здесь собраны полезные материалы для учителя из которых можно брать дополнительную информацию для уроков"

- Курсы (убрать)
- Занятия
    
    "Ну мы же говорили о том что во время урока должна быть возможность добавить на рабочую доску материалы из панели учителя. Так что да, могут использоваться повторно тесты. А со словарем постоянно будем работать, на каждом уроке"

    "У скайэнга мы видели что есть возможность переключаться между заранее заготовленными уроками. То есть допустим я приготовил для урока видео, текст и 2 теста в одном уроке. Начался урок, я включил это на доске. Мы быстро все прошли и мне надо новые тесты. Надо что бы была возможность вывести ещё новые материалы во время урока"
    
- Задания

    "автоматическая, мы кидали ссылку на задания принцип которых хотиму чтобы был внедрен в платформу https://www.liveworksheets.com/worksheets/en"

- Ссылки
- Файлы
- Темы
- Ученики


### Техническая часть

- Front и back - django
- Все операции CRUD из django admin
- Видеочат - WebRTC и WebSocket


### Замечания

/

> Добавить отзывы

process/

> ЗАПИШИСЬ НА БЕСПЛАТНЫЙ ВВОДНЫЙ УРОК - до регистрации, или можно записаться после?

teachers/

> Добавить видео с преподавателями



---

Вопросы:
Проверка домашних заданий в ручном режиме?


Элементы приложения, по которым более-менее все понятно:
1. Система аутентификации 4ч - ученик, преподаватель
2. Система оплаты, баланс 4ч
3. Курсы 1ч (преподаватель - носитель языка/нет, кол-во уроков, цена, скидка), 
   уроки 1ч (дата/время, пройдено/не пройдено), 
   домашние задания 1ч (урок, срок выполнения, задания), 
   заметки 1ч
4. Система уведомлений 2ч (перенести урок)
5. Тесты 2ч - урок, тема
6. Словарь 2ч - написание, транскрипция, произношение, примеры
7. Видео практика 2ч - название, уровень, видео, текст, категория, кол-во просмотров
8. Аудирование 2ч
9. Бесплатные уроки 2ч - ссылка/код, кол-во бесплатных уроков
10. Расписание 2ч
11. Файлы 2ч - изображения, документы

+ 20% работа над архитектурой
+ 30% unit tests
+ 30% на "непредвиденные расходы"

Предварительно 50ч.

___

### Установка приложения

    apt install libpq-dev postgresql postgresql-contrib

    virtualenv -p /usr/bin/python3 ./venv/
    source ./venv/bin/activate
    pip3 install -U -r requirements.txt


### Dump db

    python3 manage.py dumpdata --indent 2 --output dump.json
>
    python3 manage.py loaddata dump.json
    
    
### SSL

В `/etc/hosts` добавить `127.0.0.1 localhost dev.local`.

В каталоге проекта `ssl` запустить

    openssl req -config dev.local.conf -new -sha256 -newkey rsa:2048 -nodes -keyout dev.local.key -x509 -days 365 -out dev.local.crt
    
    
    

### Запуск RTC-сервера

В папке `rtc_server` запустить

    npx run server


### Запуск приложения https

В корне проекта запустить
    
    ~~python manage.py runsslserver 0.0.0.0:8000 --certificate ssl/dev.local.crt --key ssl/dev.local.key~~

    daphne -e ssl:8000:privateKey=ssl/dev.local.key:certKey=ssl/dev.local.crt backend.asgi:application



### Docker

    docker-compose run backend python manage.py dumpdata --indent 2 --output dump.json
    
    docker-compose run backend python manage.py makemigrations
    docker-compose run backend python manage.py migrate
    docker-compose run backend python manage.py loaddata dump.json
    
    docker-compose run backend python manage.py collectstatic --no-input
    
    docker-compose up --build
    
    docker-compose -f docker-compose.yml -f docker-compose.prod.yml up --build
